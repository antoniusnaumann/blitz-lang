union Statement {
	Declaration
	Expression
}

struct Declaration {
	name   Ident
	type   Option(Type)
	is_mut Bool
	init   Expression
	span   Span
}

union Expression {
	Constructor
	Call
	Member
	Ident
	Assignment
	BinaryOp
	UnaryOp
	Assert
	Mut
	For
	While
	If
	Switch
	Block
	Return
	Continue
	Break
	Try
	List_
	Index
	Group
	Literal
}

union Literal {
	Lit(String)
	Lit(Rune)
	Lit(Float)
	Lit(Int)
}

struct Ident {
	name String
	span Span
}

fn ident(name String) Ident {
	Ident(name:, span: empty_span())
}

struct Member {
	parent Box(Expression)
	member Ident
	span   Span
}

struct Constructor {
	type Type
	args List(CallArg)
	ufcs Bool
	span Span
}

struct Call {
	name   Ident
	module Option(Ident)
	args   List(CallArg)
	ufcs   Bool
	span   Span
}

struct CallArg {
	label Option(Ident)
	init  Expression
}

struct Assignment {
	left  Box(Expression)
	right Box(Expression)
}

struct For {
	iter Box(Expression)
	elem Ident
	body Block
	span Span
}

struct While {
	cond Box(Expression)
	body Block
	span Span
}

struct If {
	cond Box(Expression)
	body Block
	span Span
}

struct Switch {
	cond  Box(Expression)
	cases List(SwitchCase)
	span  Span	
}

struct SwitchCase {
	label SwitchLabel
	body  Block
	span  Span
}

union SwitchLabel {
	Type
	Ident
	Literal
	default	
}

struct Return {
	expr Box(Expression)
	span Span
}

struct Continue {
	span Span
}

struct Break {
	span Span
}

struct Try {
	expr Box(Expression)
	span Span
	ufcs Bool
}

struct Block {
	statements List(Statement)
	span       Span
}

struct List_ {
	elems List(Expression)
	span  Span
}

struct Index {
	target Box(Expression)
	index  Box(Expression)
	span   Span
}

struct Group {
	expr Box(Expression)
	span Span
}

struct BinaryOp {
	op    BinaryOperator
	left  Box(Expression)
	right Box(Expression)
	span  Span
}

struct UnaryOp {
	op   UnaryOperator
	expr Box(Expression)
	span Span
}

struct Assert {
	cond Box(Expression)
	span Span
	ufcs Bool
}

struct Mut {
	expr Box(Expression)
	span Span
	ufcs Bool
}

struct Lit(T) {
	value T
	span  Span
}

fn empty_block() Block {
	Block(statements: [], span: empty_span())
}
